[server]
# 监听地址。
listen = "http://0.0.0.0:7085"
# 外部调用鉴权 Key。
auth_key = "change-me"
# 默认分组名称。
default_group = "default"
# 默认负载均衡策略（weighted 或 failover）。
strategy = "weighted"
# 上游请求超时（秒）。
timeout_seconds = 600
# 触发熔断冷却的连续失败次数。
max_failover = 2
# 可重试请求体的最大缓冲大小（字节）。
max_request_body_bytes = 104857600

[health]
# 基础冷却时间（秒，连续熔断按倍数增加）。
cooldown_seconds = 30

[groups.default]
# 分组策略覆盖。
strategy = "weighted"
# 分组熔断阈值覆盖。
max_failover = 2
# 分组超时覆盖（秒）。
timeout_seconds = 600

[[platforms]]
# 日志显示名称。
name = "openai-primary"
# 上游基础地址。
base_url = "https://api.openai.com"
# 上游 API Key。
api_key = "sk-..."
# 平台所属分组。
group = "default"
# 权重（weighted 策略使用）。
weight = 5
# 优先级（failover 使用，越小越优先）。
priority = 1
# 注入 API Key 的请求头。
key_header = "Authorization"
# API Key 前缀（如 "Bearer "）。
key_prefix = "Bearer "
# 是否启用该平台。
enabled = true

[[platforms]]
# 日志显示名称。
name = "gemini-backup"
# 上游基础地址。
base_url = "https://generativelanguage.googleapis.com"
# 上游 API Key。
api_key = "..."
# 平台所属分组。
group = "default"
# 权重（weighted 策略使用）。
weight = 1
# 优先级（failover 使用，越小越优先）。
priority = 2
# 注入 API Key 的请求头。
key_header = "X-Goog-Api-Key"
# API Key 前缀（如 "Bearer "）。
key_prefix = ""
# 是否启用该平台。
enabled = true
